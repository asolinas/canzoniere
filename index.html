<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Viewer Canzoniere</title>
  <link rel="stylesheet" href="styles.css">
  <script src="script.js" defer></script>
</head>
<body>
  <header class="app-header">
    <div class="header-text">
      <div class="header-title">Canzoniere ChordPro</div>
      <div class="header-subtitle">Visualizza, trasponi e ingrandisci i brani ChordPro</div>
    </div>
  </header>

  <main class="layout" id="layout">
    <aside class="sidebar">
      <button id="toggle-sidebar" class="sidebar-toggle" type="button" aria-label="Nascondi barra">&lt;</button>
      <div class="sidebar-content">
      <section class="panel">
        <div class="panel-header">
          <h2>Brani dal repository</h2>
          <button id="reload-songs" class="ghost-button" title="Ricarica lista">↻</button>
        </div>
        <label class="field">
          <span>Cerca</span>
          <input type="search" id="search-input" placeholder="Titolo o nome file" aria-label="Cerca brano">
        </label>
        <div id="song-list" class="song-list" role="list" aria-live="polite"></div>
      </section>

      <section class="panel">
        <h2>Carica un file ChordPro</h2>
        <p class="help-text">Il file non verrà salvato: viene solo visualizzato nel browser.</p>
        <label class="upload">
          <input type="file" id="file-input" accept=".cho,.pro,.cpm,.chordpro,.txt" aria-label="Carica file ChordPro">
          <span class="upload-label">Scegli file</span>
        </label>
      </section>

      <section class="panel controls" aria-live="polite">
        <h2>Controlli</h2>
        <div class="control-group">
          <div class="control-label">Trasponi accordi</div>
          <div class="button-row">
            <button id="transpose-down" class="icon-button" aria-label="Trasponi verso il basso">−</button>
            <div id="transpose-value" class="value-pill">0</div>
            <button id="transpose-up" class="icon-button" aria-label="Trasponi verso l'alto">+</button>
          </div>
        </div>
        <div class="control-group">
          <div class="control-label">Zoom testo</div>
          <div class="button-row">
            <button id="zoom-out" class="icon-button" aria-label="Riduci zoom">−</button>
            <div id="zoom-value" class="value-pill">100%</div>
            <button id="zoom-in" class="icon-button" aria-label="Aumenta zoom">+</button>
          </div>
        </div>
      </section>
      </div>
    </aside>

    <section class="viewer">
      <div class="viewer-tools">
        <label for="scroll-slider">Velocità scorrimento</label>
        <div class="scroll-controls">
          <input type="range" id="scroll-slider" min="0" max="100" value="30" step="1" aria-label="Velocità di scorrimento automatica">
          <button id="scroll-play" class="icon-button" type="button" aria-label="Avvia scorrimento">▶</button>
          <button id="scroll-pause" class="icon-button" type="button" aria-label="Pausa scorrimento">⏸</button>
        </div>
      </div>
      <div id="status" class="status">Seleziona un brano dal repository o carica un file ChordPro.</div>
      <article id="song-viewer" class="song-viewer" hidden>
        <header class="song-header">
          <h1 id="song-title"></h1>
          <p id="song-subtitle" class="song-subtitle" hidden></p>
        </header>
        <div id="song-scroll" class="song-scroll">
          <div id="song-body" class="song-body"></div>
        </div>
      </article>
    </section>
  </main>

</body>
</html>
